---
#See https://github.com/HTTPArchive/almanac.httparchive.org/wiki/Authors'-Guide#metadata-to-add-at-the-top-of-your-chapters
title: CSS
description: Розділ CSS Web Almanac 2020 розповідає про кольори, одиниці величин, селектори, розміщення елементів, анімацію, медіа запити і використання Sass.
authors: [LeaVerou, svgeesus, rachelandrew]
reviewers: [estelle, fantasai, j9t, mirisuzanne, catalinred, hankchizljaw]
analysts: [rviscomi, LeaVerou, dooman87]
editors: [bazzadp]
translators: [tymosh]
LeaVerou_bio: Lea <a href="https://designftw.mit.edu">викладає курс "HCI & web programming"</a> і <a href="https://mavo.io">вивчає як зробити веб-програмування простішим</a> у <a href="https://mit.edu">MIT</a>. Вона є <a href="https://www.amazon.com/CSS-Secrets-Lea-Verou/dp/1449372635?tag=leaverou-20">авторкою</a> технічних бестселлерів та досвідченою <a href="https://lea.verou.me/speaking">спікеркою</a>. У неї є жага до відкритих веб стандартів, також вона є довготривалою учасницею <a href="https://www.w3.org/Style/CSS/members.en.php3">CSS Working Group</a>. Lea започаткувала <a href="https://github.com/leaverou">кілька популярних проектів і веб-застосунків з відкритим кодом</a>, таких як <a href="https://prismjs.com">Prism</a> та <a href="https://github.com/leaverou/awesomplete">Awesomplete</a>. Вона веде твітер <a href="https://twitter.com/leaverou">@leaverou</a> і блог <a href="https://lea.verou.me">lea.verou.me</a>.
svgeesus_bio: Chris Lilley є технічним директором World Wide Web Consortium (W3C). Вважається "батьком SVG", також співавтором PNG, співредактором CSS2, очолював групу розробників <code>@font-face</code> і був співрозробником WOFF. Був у Technical Architecture Group. Chris і досі намагається отримати керування кольором у веб. Зараз працює над CSS levels 3/4/5, Web Audio та WOFF2.
rachelandrew_bio: Я є веб-розробницею, авторкою текстів, спікеркою. Співзасновницею <a href="https://grabaperch.com">Perch CMS</a> і <a href="https://noti.st">Notist</a>. Членкинею <a href="https://www.w3.org/wiki/CSSWG">CSS Working Group</a>. Головною редакторкою <a href="https://www.smashingmagazine.com/">Smashing Magazine</a>.
discuss: 2037
results: https://docs.google.com/spreadsheets/d/1sMWXWjMujqfAREYxNbG_t1fOJKYCA6ASLwtz4pBQVTw/
featured_quote: Веб більше не підліток — йому вже 30 і він поводиться відповідно. Йому більше до вподоби стабільність і простота в читанні, ніж нові забавки і складність, він воліє не відволікатися на раптові забаганки.
featured_stat_1: 72.58%
featured_stat_label_1: Відсоток значень <code>&lt;length&gt;</code>, в яких використані одиниці <code>px</code>.
featured_stat_2: 91.05%
featured_stat_label_2: Відсоток мобільних сторінок, які використовують селектори з будь-якими вендорними префіксами
featured_stat_3: <code>darken()</code>
featured_stat_label_3: Найпопулярніші функції SCSS
---

## Вступ

Каскадні таблиці стилів (Cascading Stylesheets, CSS) – це мова, яка використовується для створення візуальної структури, форматування і розмальовування веб-сторінок та інших медіа. Це одна з трьох головних мов для побудови веб-сайтів. Іншими двома є HTML, який використовується для структури, і JavaScript, який використовується для визначення поведінки.

У [минулорічному початковому Web Almanac](../2019/), ми переглянули [велику кількість CSS метрик](../2019/css), отриманих з допомогою 41 SQL-запиту до даних HTTP Archive, щоб оцінити стан технологій у 2019. Цього року ми занурилися набагато глибше, щоб отримати не тільки кількість сторінок з певним CSS правилом, але й інформацію, *як саме* воно було використане.

Загалом, ми побачили веб у двох різних видах, коли справа доходить до використання CSS. У наших дописах в блогах та інформаційних бульбашках Twitter ми загалом більше обговорюємо найновіше та найяскравіше, однак все ще існують мільйони сайтів, які використовують код минулого десятиліття. Такі речі, як [вендорні префікси з минулої ери](#vendor-prefixes), [приватні фільтри IE](#filters), а також [використання float для розміщення елементів](#layout) в усій красі свого [clearfix](#class-names). Але ми також побачили вражаюче використання багатьох нових можливостей. Навіть таких, які тільки отримали всебічну підтримку цього року, як, наприклад, [`min()` and `max()`](#feature-queries). Однак, це загалом зворотня кореляція між тим, наскільки позитивно щось сприймається і тим, як широко це використовується. Наприклад, передові можливості [Houdini](#houdini) практично не використовувалися.

Схожим чином на конференціях ми часто фокусуємося на складних, випрацюваних випадках використання, від яких вибухає мозок, і стрічках Twitter, які заповнені твітами типу "CSS вміє *таке*?!". Однак, виявляється, що у більшості випадків використання CSS на практиці досить просте. [CSS змінні загалом використовуються як константи](#complexity) і рідко посилаються на інші змінні. `calc()` [найчастіше використовується з двома CSS властивостями](#calculations), градієнти [загалом мають дві точки](#gradients) і таке інше.

Веб більше не підліток — йому вже 30 і він поводиться відповідно. Йому більше до вподоби стабільність і простота в читанні, ніж нові забавки і складність, він воліє не відволікатися на раптові забаганки.

## Методологія

[HTTP Archive](https://httparchive.org/) проходиться [мільйоном сторінок](https://httparchive.org/reports/state-of-the-web#numUrls) кожного місяця і пропускає їх через приватний інстанс [WebPageTest](https://webpagetest.org/), щоб зберегти ключову інформацію кожної сторінки. (Більше про це можна дізнатися на сторінці [Методологія](./methodology)).

Цього року ми вирішили запитати в ком'юніті, які метрики вивчати. Ми почали з [застосунку для пропонування метрик і голосування за них](https://projects.verou.me/mavoice/?repo=leaverou/css-almanac&labels=proposed%20stat). Було отримано стільки цікавих варіантів, що ми врешті-решт включили майже всі! Ми тільки виключили метрики для шрифтів, оскільки є окремий [розділ про шрифти](./fonts).

Щоб отримати дані для цього розділу, був використаний 121 SLQ-запит, в цілому понад 10 тисяч рядків SQL, включаючи 3 тисячі рядків JavaScript функцій всередині SQL. Що робить цей розділ найбільшим розділом в історії Web Almanac.

Багато інженерної роботи було зроблено, для того, щоб уможливити такий масштабний аналіз. Так само, як і минулого року, ми пропустили весь CSS код через [CSS парсер](https://github.com/reworkcss/css) і зберегли всі [абстрактні синтаксичні дерева](https://uk.wikipedia.org/wiki/%D0%90%D0%B1%D1%81%D1%82%D1%80%D0%B0%D0%BA%D1%82%D0%BD%D0%B5_%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%87%D0%BD%D0%B5_%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE) (АСД) для всіх таблиць стилів у збірці. Результатом цих маніпуляцій стали колосальні 10 ТБ даних. Цього року ми також розробили [бібліотеку хелперів](https://github.com/leaverou/rework-utils), які опрацьовують АСД, і [парсер селекторів](https://projects.verou.me/parsel). Обидва рішення було випущено окремими проєктами з відкритим кодом. Більшість метрик використовувала [JavaScript](https://github.com/LeaVerou/css-almanac/tree/master/js) для отримання даних з одного АСД та [SQL](https://github.com/HTTPArchive/almanac.httparchive.org/tree/main/sql/2020/01_CSS) для агрегації цих даних з усієї збірки. Цікавить, як виглядатиме твій власний CSS за нашими метриками? Ми зробили [онлайн майданчик](https://projects.verou.me/css-almanac/playground), на якому ти можеш випробувати їх на своїх сайтах.

Для деяких метрик огляду АСД CSS було недостатньо. Ми хотіли подивитися на [SCSS](https://sass-lang.com/), коли були доступні sourcemaps, оскільки він показує, чого потребують розробники від CSS, на що він ще не здатний, в той час як CSS показує, що використовують розробники з наявного. Для цього ми мали використати *кастомну метрику* - JavaScript код, який виконується у краулері, коли він відвідує вказану сторінку. Ми не могли використати відповідний SCSS парсер, оскільки це б сильно сповільнило краулер. Тому ми мали звернутися до [регулярних виразів](https://github.com/LeaVerou/css-almanac/blob/master/runtime/sass.js) (*жахіття!*). Не дивлячись на такий грубий підхід, ми отримали [чимало прозрінь](#sass)!

Кастомні метрики також були використані для частини [аналізу кастомних властивостей](#custom-properties). Хоча ми можемо отримати багато інформації про кастомні властивості з самих таблиць стилів, ми не здатні побудувати діаграму залежностей без можливості поглянути на дерево DOM для контексту, оскільки кастомні властивості успадковуються. Огляд зведеного стилю ноди DOM також дає нам інформацію про те, до якого типу елементу застосована кожна властивість і які з них [зареєстровані](https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty). Цю інформацію ми також не можемо отримати з таблиць стилів.

<p class="note">Ми проходили наші сторінки і в настільному, і в мобільному режимах, але для великої кількості даних обидва режими дали схожі результати, тому, якщо не зазначено інше, представлена статистика у цьому розділі посилається на набір мобільних сторінок.</p>

## Використання

Поки JavaScript перевершує CSS у своїй частині розміру сторінки, CSS безсумнівно збільшився в розмірах за останні роки, з середньою сторінкою настільного пристрою, яка завантажує 62 КБ CSS коду, і однією з 10 сторінок, яка завантажує більше, ніж 240 КБ CSS коду. Мобільні сторінки використовують трохи менше CSS коду вздовж всіх відсоткових значень, але лише на 4-7 КБ. Хоча це безумовно більше, ніж в попередні роки, все ще далеко від [колосального середнього розміру JavaScript у 444 KB і топових 10% з 1.2 МБ](./javascript#how-much-javascript-do-we-use).

{{ figure_markup(
  image="stylesheet-size.png",
  caption="Поширення розміру передачі таблиць стилів на одну сторінку.",
  description="Гістограма показує поширення розміру передачі таблиць стилів на одну сторінку, яке включає компресію, коли це можливо. Сторінки настільних пристроїв схильний мати трохи більше байтів таблиць стилів на одну сторінку до близько 10 КБ. Відсотки 10, 25, 50, 75 та 90 для мобільних сторінок такі: 5, 22, 56, 122 та 234 КБ.",
  chart_url="https://docs.google.com/spreadsheets/d/e/2PACX-1vRpe_HsNGpekn6YZV9k6QGmcZPxalqnDrL7DrDY-7X65RZEf_-aGfWuEvhk-yWV83ctIceE1bppCLpj/pubchart?oid=762340058&format=interactive",
  sheets_gid="314594173",
  sql_file="stylesheet_kbytes.sql"
) }}

Було б резонно припустити, що багато цього CSS згенеровано препроцесорами або іншими інструментами для збірки, однак лише 15% включали sourcemaps. Незрозуміло, чи це більше говорить про прийняття sourcemap чи про використання інструментів для збірки. Серед цього переважна більшість (45%) прийшла з інших CSS файлів, показуючи процеси збірки, яким піддаються CSS файли, такі як мініфікація, використання <a hreflang="en" href="https://autoprefixer.github.io/">autoprefixer</a>, і/або <a hreflang="en" href="https://postcss.org/">PostCSS</a>. <a hreflang="en" href="https://sass-lang.com/">Sass</a> був більш популярним, ніж <a hreflang="en" href="https://lesscss.org/">Less</a> (34% від таблиць стилів з sourcemaps проти 21%), з SCSS як більш популярним діалектом (33% файлів .scss проти 1% .sass).

Всі ці кілобайти коду зазвичай розділені між кількома файлами та елементами `<style>`. Лише близько 7% сторінок тримають весь CSS код в одному окремому файлі, як нас часто вчать робити. Фактично, середня сторінка має 3 `<style>` елементи та 6 окремих таблиць стилів, серед них 10% мають в собі 14 `<style>` елементів та більш ніж 20 окремих файлів CSS! І поки це відносно прийнятно для настільних комп'ютерів, це справді вбиває [продуктивність](./performance) на мобільних пристроях, де час затримки є важливішим, ніж швидкість завантаження.

{{ figure_markup(
  caption="Найбільша кількість файлів стилів, завантажених однією сторінкою.",
  content="1,379",
  classes="big-number",
  sheets_gid="1111507751",
  sql_file="stylesheet_count.sql"
) }}

Важко повірити, але максимальна кількість файлів стилів на сторінку це 26 777 `<style>` елементів і 1 379 окремих! Я б точно хотіла обійти таку сторінку десятою дорогою!

{{ figure_markup(
  image="stylesheet-count.png",
  caption="Поширення кількості файлів стилів на сторінку.",
  description="Гістограма показує поширення файлів стилів на сторінку. Настільні та мобільні пристрої майже однакові за поширенням. 10, 25, 50, 75 та 90-ий проценти для мобільних пристроїв наступні: 1, 3, 6, 12 та 21 файл стилів на сторінку.",
  chart_url="https://docs.google.com/spreadsheets/d/e/2PACX-1vRpe_HsNGpekn6YZV9k6QGmcZPxalqnDrL7DrDY-7X65RZEf_-aGfWuEvhk-yWV83ctIceE1bppCLpj/pubchart?oid=163217622&format=interactive",
  sheets_gid="1111507751",
  sql_file="stylesheet_count.sql"
) }}

Іншим способом визначити розмір є кількість правил. Середня сторінка включає сумарно 448 правил та 5 454 визначень. Що цікаво, 10% сторінок містять мінімальну кількість CSS: менше ніж 13 правил! Попри те, що мобільні пристрої мають трохи менші файлі стилів, вони також містять трохи більше правил, показуючи менші правила в цілому (що має тенденцію траплятися з media запитами).

{{ figure_markup(
  image="rules.png",
  caption="Поширення сумарної кількості стильових правил на сторінку.",
  description="Гістограма показує поширення стильових правил на сторінку. Мобільні пристрої зазвичай мають трохи більше правил, ніж настільні пристрої. 10, 25, 50, 75 та 90-ий проценти для мобільних пристроїв наступні: 13, 140, 479, 1 074 та 1 831 правило на сторінку.",
  chart_url="https://docs.google.com/spreadsheets/d/e/2PACX-1vRpe_HsNGpekn6YZV9k6QGmcZPxalqnDrL7DrDY-7X65RZEf_-aGfWuEvhk-yWV83ctIceE1bppCLpj/pubchart?oid=1918103300&format=interactive",
  sheets_gid="42376523",
  sql_file="selectors.sql"
) }}

## Селектори та каскад

CSS пропонує кілька варіантів застосування стилів до сторінки: від класів, ідентифікаторів та з використанням надважливого каскаду для уникнення повторюваних стилів. То як розробники застосовують стилі до своїх сторінок?

### Назви класів

Для чого розробники використовують назви класів сьогодні? Щоб відповісти на це питання, ми поглянули на найпопулярніші назви класів. Список очолювали класи <a hreflang="en" href="https://fontawesome.com/">Font Awesome</a>, з яких 192 зі 198 були `fa` або `fa-*`! Єдиним, про що початкове дослідження могло нам сказати, було те, що Font Awesome надзвичайно популярний і використовується майже третиною сайтів!

Однак як тільки ми прибрали класи `fa-*` та `wp-*` (які йшли з <a hreflang="en" href="https://wordpress.com/">WordPress</a>, іншого надзвичайно популярного програмного рішення), ми отримали більш значущі результати. За вийнятком цих, класи, що описують стани, здаються найбільш популярними. Клас `.active` з'являється майже на половині класів, а `.selected` та `.disabled` практично не відстають.

Лише декілька з найпоширеніших класів були презентаційними, і більшість з них була або орієнтована на вирівнювання (`pull-right` і `pull-left` зі старішого <a hreflang="en" href="https://getbootstrap.com/">Bootstrap</a>, `alignright`, `alignleft` etc.) або `clearfix`, який досі використовується на 22% сайтів, попри те, що floats, як метод розміщення, витіснилися більш сучасними модулями Grid та Flexbox.

{{ figure_markup(
  image="popular-class-names.png",
  caption="Найпопулярніші класи за відсотком сторінок.",
  description="Гістограма показує 14 найпопулярніших назв класів для настільних та мобільних сторінок. Клас `active` знайдений на 40% сторінок. Решта класів зустрічається на 20-30% сторінок і є в порядку спадання наступною: `fa`, `fa-*;`, `pull-right`, `pull-left`, `selected`, `disabled`, `clearfix`, `button`, `title`, `wp-*;`, `btn`, `container` та `sr-only`.",
  chart_url="https://docs.google.com/spreadsheets/d/e/2PACX-1vRpe_HsNGpekn6YZV9k6QGmcZPxalqnDrL7DrDY-7X65RZEf_-aGfWuEvhk-yWV83ctIceE1bppCLpj/pubchart?oid=1187401149&format=interactive",
  sheets_gid="863628849",
  sql_file="top_selector_classes_wp_fa_prefixes.sql"
) }}
